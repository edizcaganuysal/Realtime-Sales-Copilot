# =============================================================================
# Live Sales Coach — Master env example
# =============================================================================
# Copy this to:
#   infra/.env          (for docker-compose)
#   apps/api/.env       (API process env)
#   apps/web/.env.local (Next.js public env)
# =============================================================================

# ── Docker / Infrastructure ──────────────────────────────────────────────────
POSTGRES_USER=lsc
POSTGRES_PASSWORD=lsc_dev_pass
POSTGRES_DB=lsc_db
POSTGRES_PORT=5432

REDIS_PASSWORD=lsc_redis_pass
REDIS_PORT=6379

# ── API ──────────────────────────────────────────────────────────────────────
NODE_ENV=development
PORT=3001

# Postgres — local Docker
DATABASE_URL=postgresql://lsc:lsc_dev_pass@localhost:5432/lsc_db

# Supabase — replace both when using Supabase cloud
# DATABASE_URL      = pooler (transaction mode, port 6543) — used by the app at runtime
# DATABASE_DIRECT_URL = direct connection (port 5432)     — used by drizzle-kit migrations
# DATABASE_URL=postgresql://postgres.[PROJECT_REF]:[DB_PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres
# DATABASE_DIRECT_URL=postgresql://postgres:[DB_PASSWORD]@db.[PROJECT_REF].supabase.co:5432/postgres
# DATABASE_SSL=true   # set to true for any Supabase or remote Postgres with SSL

DATABASE_SSL=false
DATABASE_DIRECT_URL=

# Supabase project keys (API layer uses service role, web uses anon key)
SUPABASE_URL=https://[PROJECT_REF].supabase.co
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_STORAGE_BUCKET_INGESTION=ingestion

# Redis (used by apps/api)
REDIS_URL=redis://:lsc_redis_pass@localhost:6379

# CORS (comma-separated allowed origins)
WEB_ORIGIN=http://localhost:3000
CORS_ORIGIN=http://localhost:3000

# JWT
JWT_SECRET=change_this_to_a_long_random_secret_min_32_chars
JWT_EXPIRES_IN=7d

# ── Twilio (outbound dialer + Media Streams) ─────────────────────────────────
# Get all from: https://console.twilio.com
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# A purchased/verified Twilio phone number in E.164 format
TWILIO_FROM_NUMBER=+15551234567
TWILIO_PHONE_NUMBER=+15551234567
TWILIO_TWIML_APP_SID=
# Publicly accessible base URL for Twilio webhooks.
# Local dev: start an ngrok tunnel → ngrok http 3001 → copy the https URL
# Production: your actual API domain (e.g. https://api.livesalescoach.com)
TWILIO_WEBHOOK_BASE_URL=https://your-subdomain.ngrok-free.app

# ── Speech-to-Text (STT) ─────────────────────────────────────────────────────
# Supported provider: deepgram (recommended for real-time)
# Get key at: https://console.deepgram.com  — free tier available
STT_PROVIDER=deepgram
STT_API_KEY=your_deepgram_api_key_here
DEEPGRAM_API_KEY=your_deepgram_api_key_here
# Set to "true" to use the built-in stub transcript engine (no real STT needed).
# The stub fires fake transcript lines every 2 s — useful for local dev without
# a real phone call or STT credentials.
USE_STUB_TRANSCRIPT=false

# ── LLM (coaching suggestions) ───────────────────────────────────────────────
# Supported: openai | anthropic | azure-openai
LLM_PROVIDER=openai
LLM_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
LLM_MODEL=gpt-4o
# Optional: custom base URL for Azure OpenAI or local proxy
LLM_BASE_URL=

# ── Credits metering ─────────────────────────────────────────────────────────
CREDITS_TOKENS_PER_CREDIT=100
CREDITS_CALL_REAL_PER_MIN=120
CREDITS_CALL_PRACTICE_PER_MIN=60

# ── Web ───────────────────────────────────────────────────────────────────────
APP_BASE_URL=http://localhost:3000
API_BASE_URL=http://localhost:3001
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_WS_URL=ws://localhost:3001
NEXT_PUBLIC_APP_NAME=Live Sales Coach
NEXT_PUBLIC_SUPABASE_URL=https://[PROJECT_REF].supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:3000/api/auth/google/callback

# ── Seed script ───────────────────────────────────────────────────────────────
# Override these to change the initial admin account created by db:seed
SEED_ADMIN_EMAIL=admin@example.com
SEED_ADMIN_PASSWORD=Password123!
